% Vouch Protocol arXiv Paper - Academic Preamble
% Include with: \input{../common/preamble}

\documentclass[11pt, a4paper]{article}

% Essential packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{booktabs}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{tcolorbox}
\usepackage{natbib}

% Page geometry
\geometry{margin=1in}

% Draft/Preprint watermark
\usepackage{draftwatermark}
\SetWatermarkText{PREPRINT}
\SetWatermarkScale{0.5}
\SetWatermarkColor[gray]{0.9}

% Colors
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{vouchgreen}{HTML}{22c55e}

% Theorem environments
\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{property}{Property}

% Code listing style
\lstdefinestyle{vouchstyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{codepurple},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codegreen},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    frame=single
}
\lstset{style=vouchstyle}

% JSON language definition for listings
\lstdefinelanguage{json}{
    morestring=[b]",
    morestring=[d]',
    literate=
     *{0}{{{\color{codepurple}0}}}{1}
      {1}{{{\color{codepurple}1}}}{1}
      {2}{{{\color{codepurple}2}}}{1}
      {3}{{{\color{codepurple}3}}}{1}
      {4}{{{\color{codepurple}4}}}{1}
      {5}{{{\color{codepurple}5}}}{1}
      {6}{{{\color{codepurple}6}}}{1}
      {7}{{{\color{codepurple}7}}}{1}
      {8}{{{\color{codepurple}8}}}{1}
      {9}{{{\color{codepurple}9}}}{1}
      {:}{{{\color{codegray}:}}}{1}
      {,}{{{\color{codegray},}}}{1}
      {\{}{{{\color{codegray}\{}}}{1}
      {\}}{{{\color{codegray}\}}}}{1}
      {[}{{{\color{codegray}[}}}{1}
      {]}{{{\color{codegray}]}}}{1},
}

% Hyperlinks
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=blue,
    citecolor=blue
}

% Custom commands
\newcommand{\vouch}{\textsc{Vouch Protocol}}
\newcommand{\seriesurl}{https://vouch-protocol.com/docs/disclosures/}
\newcommand{\githuburl}{https://github.com/vouch-protocol/vouch}
\newcommand{\websiteurl}{https://vouch-protocol.com}

% Series note (compact)
\newcommand{\seriesnote}{%
\vspace{0.5em}
\noindent\textit{This paper is part of the Vouch Protocol Defensive Disclosure Series. Full index: \url{\seriesurl}}
\vspace{0.5em}
}

% Prior art declaration box
\newcommand{\priorartbox}{%
\begin{tcolorbox}[colback=gray!5,colframe=gray!50,title=Prior Art Declaration]
This document is published as a defensive prior art disclosure under the Creative Commons CC0 1.0 Universal Public Domain Dedication. The methods and systems described herein are hereby released into the public domain to prevent patent monopolization.

Any party implementing similar functionality after the publication date of this document cannot claim novelty for patent purposes.

\textbf{Reference Implementation:} \url{\githuburl}
\end{tcolorbox}
}

% Vouch signature command for papers
% Usage: \vouchsign{short-id}{author-name}{signer-identity}
% Example: \vouchsign{pad001}{Ramprasad Anandam Gaddam}{github:rampyg}
\newcommand{\vouchsign}[3]{%
\vspace{1em}
\begin{tcolorbox}[colback=green!5,colframe=green!40!black,title=\textsf{Cryptographically Signed Document}]
\small
\textbf{Signed by:} #2 (\texttt{#3})\\
\textbf{Verify:} \url{https://v.vouch-protocol.com/p/#1}\\[0.5em]
\textit{This document's authenticity can be verified by computing its SHA-256 hash and checking against the signature registered at the verification URL above.}
\end{tcolorbox}
}

% Bibliography style
\bibliographystyle{plainnat}
